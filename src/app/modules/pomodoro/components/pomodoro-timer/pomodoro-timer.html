<div class="flex flex-col items-center w-full mx-auto gap-6 p-4">
  <!-- Timer Display Box -->
  @if (timeLeft$ | async; as timeLeft) {
    <div
      class="w-full rounded-3xl p-8 flex flex-col items-center relative overflow-hidden bg-[radial-gradient(circle,_rgba(255,255,255,0.1)_0%,_rgba(0,0,0,0.3)_100%)]"
    >
      <!-- Header Decorativo (opcional) -->
      <div class="absolute top-4 left-6 text-gray-500 font-medium">
        {{ "pomodoro.work" | translate }}
      </div>

      <!-- Timer Text -->
      <div class="text-8xl font-bold text-text mt-4 tracking-tight font-mono">
        {{ formatTime(timeLeft) }}
      </div>

      <!-- State Indicator (Work vs Break) -->
      @if (mode$ | async; as mode) {
        <div
          class="mt-2 px-3 py-1 rounded-full text-sm font-bold uppercase tracking-wider"
          [ngClass]="
            mode === 'work'
              ? 'bg-primary/10 text-primary'
              : 'bg-green/10 text-green'
          "
        >
          {{
            mode === "work"
              ? ("pomodoro.focus" | translate)
              : ("pomodoro.break" | translate)
          }}
        </div>
      }
    </div>
  }

  <!-- Action Buttons -->
  <div class="flex flex-col items-center gap-3 w-full">
    @if (!(isRunning$ | async)) {
      <button
        (click)="startTimer()"
        class="bg-green hover:bg-green/90 text-white font-bold py-3 px-12 rounded-xl text-xl shadow-md transition-transform active:scale-95 w-48"
      >
        {{ "pomodoro.start" | translate }}
      </button>
    } @else {
      <button
        (click)="pauseTimer()"
        class="bg-green hover:bg-green/90 text-white font-bold py-3 px-12 rounded-xl text-xl shadow-md transition-transform active:scale-95 w-48 mb-2"
      >
        {{ "pomodoro.pause" | translate }}
      </button>
      <button
        (click)="stopTimer()"
        class="bg-navbarInactive hover:bg-navbarInactive/90 text-white font-bold py-2 px-8 rounded-lg text-sm shadow-sm transition-transform active:scale-95"
      >
        {{ "pomodoro.stop" | translate }}
      </button>
    }
  </div>

  <!-- Presets List -->
  <div class="w-full grid gap-4 mt-4 grid-cols-1 lg:grid-cols-2">
    @for (preset of presets; track preset.label) {
      <div
        (click)="selectPreset(preset)"
        class="bg-containerDiv2 p-4 rounded-2xl flex items-center justify-between cursor-pointer border-2 transition-all hover:bg-white"
        [ngClass]="
          selectedPreset === preset
            ? 'border-green shadow-md'
            : 'border-transparent'
        "
      >
        <div class="flex items-center gap-3">
          <!-- Icono Reloj Naranja -->
          <div class="bg-navbarActive rounded-full p-2 text-white">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
              />
            </svg>
          </div>
          <span class="text-2xl font-bold text-text">{{ preset.label }}</span>
        </div>

        <!-- Badge Estado -->
        @if (selectedPreset === preset) {
          <span
            class="bg-green text-white px-4 py-1 rounded-lg font-bold text-sm"
            >{{ "pomodoro.active" | translate }}</span
          >
        } @else {
          <span
            class="bg-[#D1D1C6] text-[#9CA3AF] px-4 py-1 rounded-lg font-bold text-sm"
            >{{ "pomodoro.inactive" | translate }}</span
          >
        }
      </div>
    }
  </div>
</div>
